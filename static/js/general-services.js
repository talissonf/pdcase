define(["core"],function(app){angular.btgUtilities={},angular.btgUtilities.URIbaseContext=document.getElementsByTagName("base")[0].getAttribute("href"),angular.btgUtilities.browser=getBrowser(),angular.btgUtilities.scrollTo=function(destinationElement,endCallback){if(destinationElement){var gutter=10;"undefined"!=typeof angular.element().animate?(destinationElement=angular.element(destinationElement),currentOffset=window.pageYOffset,destinationElement.length>0&&currentOffset!=destinationElement.offset().top?$("html,body").animate({scrollTop:destinationElement.offset().top-($("#header").is(":visible")?$("#header").innerHeight():$("html,body").offset().top)-gutter},{duration:"slow",complete:function(){endCallback&&endCallback()}}):endCallback&&endCallback()):(scrollDestination=angular.element(destinationElement).offset().top-($("#header").is(":visible")?$("#header").innerHeight():$("html,body").offset().top)-gutter,angular.element("html,body").scrollTop(scrollDestination),endCallback&&endCallback())}},angular.btgUtilities.isInteger=function(n){return Number(n)===n&&n%1===0},angular.btgUtilities.isFloat=function(n){return Number(n)===n&&n%1!==0},angular.btgUtilities.CPFvalidate=function(cpf){if(!cpf)return!1;if(cpf=cpf.toString().replace(/[^\d]+/g,""),""==cpf)return!1;if(11!=cpf.length||"00000000000"==cpf||"11111111111"==cpf||"22222222222"==cpf||"33333333333"==cpf||"44444444444"==cpf||"55555555555"==cpf||"66666666666"==cpf||"77777777777"==cpf||"88888888888"==cpf||"99999999999"==cpf)return!1;for(add=0,i=0;i<9;i++)add+=parseInt(cpf.charAt(i))*(10-i);if(rev=11-add%11,10!=rev&&11!=rev||(rev=0),rev!=parseInt(cpf.charAt(9)))return!1;for(add=0,i=0;i<10;i++)add+=parseInt(cpf.charAt(i))*(11-i);return rev=11-add%11,10!=rev&&11!=rev||(rev=0),rev==parseInt(cpf.charAt(10))},app.factory("fileDownloader",["$rootScope","$compile","$http","$q","$window","$filter","$timeout",function($rootScope,$compile,$http,$q,$window,$filter,$timeout){var browserIsCompatibleWithBGDownload=typeof Blob==typeof Function&&!!new Blob&&!angular.btgUtilities.browser.ios,getDataFromURL=function(URL){var deferred=$q.defer();return $http({method:"GET",loadingOnView:!1,url:URL,headers:{Accept:"*/*","Content-Type":"*/*"},responseType:"arraybuffer"}).success(function(data,status,header,config){"undefined"!=typeof data&&null!=data?deferred.resolve({data:data,status:status,header:header,config:config}):deferred.reject({data:data,status:status,header:header,config:config})}).error(function(data,status,header,config){deferred.reject({data:data,status:status,header:header,config:config})}),deferred.promise},dealWithTargetElement={lock:function(targetEl){targetEl&&angular.element(targetEl).attr("disabled","disabled").addClass("disabled").addClass("loading")},unlock:function(targetEl){targetEl&&angular.element(targetEl).removeAttr("disabled").removeClass("disabled").removeClass("loading")}};return{get:function(params){if("undefined"!=typeof params.url&&params.url)browserIsCompatibleWithBGDownload?(dealWithTargetElement.lock(params.targetElement),getDataFromURL(params.url).then(function(response){var filename=response.header()["content-disposition"].match(/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/)[1].trim(),filetype=response.header()["content-type"].trim();blob=new Blob([response.data],{type:filetype,encoding:"raw"}),require(["filesaver"],function(){window.saveAs(blob,filename)}),dealWithTargetElement.unlock(params.targetElement),"function"==typeof params.success&&params.success()},function(error){if(dealWithTargetElement.unlock(params.targetElement),!$filter("isEmpty")(params.errorMsg)||0!=params.errorMsg){$rootScope.downloadFileError=!1;var downloadErrorModal='<overlay-block-screen ng-show="$root.downloadFileError" message-type="info" message-title="Atenção"><span>{{params.errorMsg ? params.errorMsg : ("Ocorreu um erro no download do arquivo. Tente novamente em instantes.")}}</span></overlay-block-screen>';downloadErrorModal=$compile(downloadErrorModal)($rootScope),angular.element("body").append(downloadErrorModal),$timeout(function(){$rootScope.downloadFileError=!0},100)}"function"==typeof params.error&&params.error()})):($rootScope.avoidOcasionalClose.stop(),window.open(params.url,"_self"),$timeout(function(){$rootScope.avoidOcasionalClose.start(),"function"==typeof params.success&&params.success()},150));else if(0!=params.loadingMsg||!$filter("isEmpty")(params.errorMsg)||0!=params.errorMsg){$rootScope.downloadFileError=!1;var downloadErrorModal='<modal-dialog ng-show="$root.downloadFileError" message-title="Atenção"><span>{{params.errorMsg ? params.errorMsg : "Erro no Download"}}</span><div class="buttonscontainer clearfix"><button class="btn btn-primary btn-large" ng-click="$root.downloadFileError=false">{{OK}}</button></div></modal-dialog>';downloadErrorModal=$compile(downloadErrorModal)($rootScope),angular.element("body").append(downloadErrorModal),$timeout(function(){$rootScope.downloadFileError=!0},100)}}}}]),app.factory("HighchartsDefaults",["$rootScope","$filter","$timeout",function($rootScope,$filter,$timeout){var defaultColors={shortColorPallete:["#27b1a5","#d5a520","#008fd5","#ec6400","#ffd539","#606060","#02baf2","#70822e"]},defaultFonts={arialFontStack:'Arial,"Helvetica Neue",Helvetica,sans-serif',sourceSansFontStack:'"Source Sans Pro",Arial,Helvetica,sans-serif'};return{colors:{shortColorPallete:defaultColors.shortColorPallete},fonts:{arialFontStack:defaultFonts.arialFontStack,sourceSansFontStack:defaultFonts.sourceSansFontStack},lang:function(){var langOptions={lang:{decimalPoint:",",thousandsSep:".",downloadJPEG:"Baixar imagem JPEG",downloadPDF:"Baixar documento PDF",downloadPNG:"Baixar imagem PNG",downloadSVG:"Baixar imagem SVG",drillUpText:"<< Clique para voltar para o Início",loading:"Carregando...",noData:"Não há dados para exibir.",printChart:"Imprimir Gráfico",rangeSelectorFrom:"De",rangeSelectorTo:"a",resetZoom:"Tirar Zoom",shortMonths:"Jan,Fev,Mar,Abr,Mai,Jun,Jul,Ago,Set,Out,Nov,Dez".split(","),months:"Janeiro,Fevereiro,Março,Abril,Maio,Junho,Julho,Agosto,Setembro,Outubro,Novembro,Dezembro".split(","),weekdays:"Domingo,Segunda-feira,Terça-feira,Quarta-feira,Quinta-feira,Sexta-feira,Sábado".split(",")},xAxis:{dateTimeLabelFormats:{millisecond:"%e de %B de %Y, %H:%M:%S.%L",second:"%e de %B de %Y, %H:%M:%S",minute:"%e de %B de %Y, %H:%M",hour:"%e de %B de %Y, %H:%M",day:"%e de %B de %Y",week:" %e.%b",month:"%b/%Y",year:"%Y"}},rangeSelector:{buttons:[{type:"month",count:1,text:"Mês"},{type:"month",count:3,text:"3m"},{type:"month",count:6,text:"6m"},{type:"ytd",text:"YTD"},{type:"year",count:1,text:"Ano"},{type:"all",text:"Tudo"}],inputDateFormat:"%d/%m/%Y",inputEditDateFormat:"%d/%m/%Y"},plotOptions:{line:{tooltip:{dateTimeLabelFormats:{millisecond:"%e de %B de %Y, %H:%M:%S.%L",second:"%e de %B de %Y, %H:%M:%S",minute:"%e de %B de %Y, %H:%M",hour:"%e de %B de %Y, %H:%M",day:"%e de %B de %Y",week:"Semana de %A, %b %e, %Y",month:"%b/%Y",year:"%Y"}}}},tooltip:{xDateFormat:"%d/%m/%Y"}};Highcharts.setOptions(langOptions),angular.forEach(Highcharts.charts,function(thisChart,thisChartIndex){if(thisChart){if(thisChart.title&&thisChart.title.textStr.indexOf("{{")>-1||"undefined"!=typeof thisChart.titleToTranslate){var toTranslateChartTitleString;"undefined"!=typeof thisChart.titleToTranslate?toTranslateChartTitleString=thisChart.titleToTranslate:(thisChart.titleToTranslate=thisChart.title.textStr,toTranslateChartTitleString=thisChart.title.textStr),toTranslateChartTitleString=toTranslateChartTitleString.replace(/["{'}]+/g,"").trim(),thisChart.setTitle({text:toTranslateChartTitleString})}angular.forEach(thisChart.series,function(thisSerie,thisSerieIndex){if(thisSerie.update({tooltip:{dateTimeLabelFormats:langOptions.plotOptions.line.tooltip.dateTimeLabelFormats,xDateFormat:langOptions.tooltip.xDateFormat}}),thisSerie.name.toLowerCase().indexOf("series ")<0){if(thisSerie.name&&thisSerie.name.indexOf("{{")>-1||thisSerie&&"undefined"!=typeof thisSerie.options.nameToTranslate){var toTranslateSerieNameString;"undefined"!=typeof thisSerie.options.nameToTranslate?toTranslateSerieNameString=thisSerie.options.nameToTranslate:(toTranslateSerieNameString=thisSerie.name,thisSerie.update({nameToTranslate:thisSerie.name},!1));var toTranslateSerieNameString=toTranslateSerieNameString.replace(/["{'}]+/g,"").trim();thisSerie.update({name:toTranslateSerieNameString},!1)}}else angular.forEach(thisSerie.data,function(internalSerie,ix){if(internalSerie.name&&internalSerie.name.indexOf("{{")>-1||internalSerie.series&&"undefined"!=typeof internalSerie.series.options.nameToTranslate){var toTranslateinternalSerieNameString;"undefined"!=typeof internalSerie.series.options.nameToTranslate?toTranslateinternalSerieNameString=internalSerie.series.options.nameToTranslate:(toTranslateinternalSerieNameString=internalSerie.name,internalSerie.update({nameToTranslate:internalSerie.name},!1));var toTranslateinternalSerieNameString=toTranslateinternalSerieNameString.replace(/["'{}]+/g,"").replace("translate","").trim();internalSerie.series.update({name:toTranslateinternalSerieNameString},!1)}})})}})},init:function(){function startHighchartsBinds(){thisFactory.set(),$rootScope.$on("$translatePartialLoaderStructureChanged",function(event){thisFactory.lang()}),$rootScope.$watch(function(){return angular.element(".highcharts-container").length},function(newItem,oldItem){(newItem||"undefined"!=typeof oldItem)&&$timeout(function(){thisFactory.lang()})})}thisFactory=this;var waitForHighcharts=$rootScope.$watch(function(){return"undefined"!=typeof Highcharts},function(newVal){startHighchartsBinds(),waitForHighcharts()})},set:function(){thisFactory=this,Highcharts.getOptions().colors=defaultColors.shortColorPallete,defaultColors.shortColorPalleteWithGradient=Highcharts.map(defaultColors.shortColorPallete,function(color){return{radialGradient:{cx:.5,cy:.5,r:1.2},stops:[[0,Highcharts.Color(color).brighten(.25).get("rgb")],[1,Highcharts.Color(color).brighten(-.1).get("rgb")]]}});var highchartsResPath=document.location.href.split(URIbaseContext)[0]+URIbaseContext+"static/js/libraries/highstock/";Highcharts.setOptions({global:{VMLRadialGradientURL:highchartsResPath+"vml-radial-gradient.png",canvasToolsURL:highchartsResPath+"canvas-tools.js"}}),Highcharts.setOptions({chart:{animation:!0,backgroundColor:"transparent",plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,spacing:[0,0,0,0],reflow:!0},credits:{enabled:!1},loading:{labelStyle:{color:"#FFF",fontFamily:defaultFonts.sourceSansFontStack},style:{backgroundColor:Highcharts.Color("#000000").setOpacity(.15).get("rgba"),opacity:.75}},noData:{style:{fontSize:"14px",fontFamily:defaultFonts.sourceSansFontStack,fontWeight:"normal",color:"#cccccc"},useHTML:!0},drilldown:{allowPointDrilldown:!0,activeAxisLabelStyle:{cursor:"pointer",color:"#666",fontWeight:"normal",textDecoration:"none"},activeDataLabelStyle:{cursor:"pointer",color:"#666",fontWeight:"normal",textDecoration:"none"},drillUpButton:{relativeTo:"spacingBox",position:{y:10,x:0,align:"center",verticalAlign:"top"},theme:{fill:"transparent","stroke-width":0,r:0,style:{color:"#0088cc",cursor:"pointer",fontFamily:defaultFonts.sourceSansFontStack,fontSize:"10px",textDecoration:"none"},states:{hover:{fill:"transparent",style:{color:"#6AABD6",textDecoration:"underline"}},select:{fill:"transparent",style:{color:"#6AABD6"}}}}}},xAxis:{type:"datetime",crosshair:{width:1,color:"#25bdae"},useHTML:!0,gridLineColor:"#4d596a",lineColor:"#4d596a",lineWidth:2,minorGridLineColor:"#4d596a",tickColor:"#4d596a",showFirstLabel:!0,showLastLabel:!0,labels:{style:{color:"#999999",fontFamily:defaultFonts.sourceSansFontStack,fontSize:"12px",fontWeight:400},overflow:"justify",staggerLines:2}},navigator:{enabled:!0,height:40,margin:5},rangeSelector:{buttonSpacing:0,buttonPosition:{y:0,x:30},height:25,buttonTheme:{fill:"transparent",stroke:"#00afa3","stroke-width":1,padding:7,style:{color:"#00afa3",fontFamily:defaultFonts.sourceSansFontStack,fontSize:"13.6px",lineHeight:"13.6px",fontWeight:"normal"},states:{hover:{fill:"transparent",stroke:"#00afa3",style:{color:"#fff",cursor:"pointer"}},select:{fill:"#00afa3",stroke:"#00afa3",style:{color:"#fff",fontWeight:"normal"}},disabled:{style:{color:Highcharts.Color("#00afa3").setOpacity(.2).get("rgba"),fontWeight:"normal"}}}},inputStyle:{color:"#999999",fontFamily:defaultFonts.sourceSansFontStack,fontSize:"11px",fontWeight:"normal"},inputPosition:{align:"right",verticalAlign:"top"},labelStyle:{display:"none"}},scrollbar:{enabled:!1},yAxis:{lineWidth:0,opposite:!1,gridLineColor:"#4d596a",labels:{formatter:function(){var absValue=Math.abs(this.value);return absValue>=1e6?absValue=Highcharts.numberFormat(absValue/1e6,2)+"M":absValue<1e6&&absValue>=1e3&&(absValue=Highcharts.numberFormat(absValue/1e3)+"K"),(this.value<0?"-":"")+absValue},align:"right",x:0,y:-2,style:{color:"#999999",fontFamily:defaultFonts.sourceSansFontStack,fontWeight:400,fontSize:"12px"},overflow:"justify"},offset:10,min:null,title:{text:null}},plotOptions:{series:{showCheckbox:!0,events:{checkboxClick:function(event){event.checked?this.show():this.hide()},show:function(event){this.checkbox&&(this.checkbox.checked=!0)},hide:function(event){this.checkbox&&(this.checkbox.checked=!1)},legendItemClick:function(event){this.checkbox&&(this.checkbox.checked=this.visible)},afterAnimate:function(event){this.checkbox&&(this.visible?(this.checkbox.checked=!0,this.selected=!0):(this.checkbox.checked=!1,this.selected=!1)),this.legendSymbol&&this.legendSymbol.hide()}},dataLabels:{style:{color:"#666",fontFamily:defaultFonts.sourceSansFontStack,fontSize:"0.95em",fontWeight:"normal",textShadow:void 0}},states:{hover:{halo:{opacity:.2}}},marker:{lineColor:Highcharts.Color("#FFFFFF").setOpacity(.75).get("rgba"),radius:2.5,symbol:"circle"}},area:{fillOpacity:.15},areaspline:{fillOpacity:.15,states:{hover:{lineWidthPlus:0,halo:{size:12,attributes:{"stroke-width":1,"stroke-dasharray":3,stroke:"#25bdae"}}}},marker:{states:{hover:{radiusPlus:3},select:{radiusPlus:3}}}},column:{borderWidth:0,groupPadding:.1,pointPadding:.05,states:{hover:{brightness:.35}}},flags:{showInLegend:!1,tooltip:{pointFormat:"{point.text}"},style:{fontSize:"0px",lineHeight:"11px"},shape:"url("+$rootScope.URIbaseContext+"static/img/details/highcharts_marker.png)",stackDistance:25,title:"",y:-10},line:{states:{hover:{lineWidthPlus:0,halo:{size:12,attributes:{"stroke-width":1,"stroke-dasharray":3,stroke:"#25bdae"}}}},marker:{states:{hover:{radiusPlus:3},select:{radiusPlus:3}}}},spline:{states:{hover:{lineWidthPlus:0,halo:{size:12,attributes:{"stroke-width":1,"stroke-dasharray":3,stroke:"#25bdae"}}}},marker:{states:{hover:{radiusPlus:3},select:{radiusPlus:3}}}},pie:{borderWidth:0,dataLabels:{color:"#ffffff",connectorWidth:0,formatter:function(){var pointColor=this.point.color;return"object"==typeof pointColor&&(pointColor=pointColor.stops[0][1]),'<span style="color:'+pointColor+';text-transform:uppercase">'+this.point.name+"</span>"},useHTML:!0},point:{events:{legendItemClick:function(){return this.select(),this.series.chart.tooltip.refresh(this),!1}}},states:{hover:{halo:{size:3}}},tooltip:{pointFormat:"<b>{point.percentage:.2f}%</b>"}}},legend:{align:"right",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:null,enabled:!0,floating:!1,labelFormatter:function(){var max=22,val=" "!=this.name?this.name:"...";return val.length>max?val.slice(0,max)+"...":val},itemMarginTop:3,itemMarginBottom:3,itemStyle:{color:"#ffffff",fontFamily:defaultFonts.sourceSansFontStack,fontSize:"13.6px",fontWeight:"normal",textTransform:"uppercase"},itemHoverStyle:{color:"#6AAAD6"},itemWidth:null,layout:"horizontal",maxHeight:null,symbolRadius:0,symbolPadding:0,symbolHeight:0,symbolWidth:0,x:20,y:0,verticalAlign:"top",title:{text:null,style:{color:"#4c93cf",fontFamily:defaultFonts.sourceSansFontStack,fontSize:"12px",fontWeight:"normal"}}},title:{text:"",style:{color:"#0078AE",fontFamily:defaultFonts.sourceSansFontStack,fontSize:"16px"},y:0},tooltip:{animation:!0,shared:!0,style:{color:"#444444",fontFamily:defaultFonts.sourceSansFontStack,fontSize:"12px",fontWeight:"normal",padding:0,"z-index":1},useHTML:!0,headerFormat:'<div class="tooltip-date">{point.key}</div>'}}),function(H){H.wrap(Highcharts,"numberFormat",function(proceed){if(arguments[1]&&angular.isNumber(arguments[1])){var value=arguments[1],fractionSize=arguments[2];strimmedNumber=String(value).split(".").map(function(d,i){return i&&"undefined"!=typeof fractionSize&&!window.isNaN(fractionSize)?d.substr(0,fractionSize):d}).join("."),arguments[1]=parseFloat(strimmedNumber)}var ret=proceed.apply(0,[].slice.call(arguments,1));return ret}),H.wrap(H.Legend.prototype,"positionCheckboxes",function(p,scrollOffset){var translateY,alignAttr=this.group.alignAttr,clipHeight=this.clipHeight||this.legendHeight;alignAttr&&(translateY=alignAttr.translateY,H.each(this.allItems,function(item){var top,checkbox=item.checkbox,bBox=item.legendItem.getBBox(!0);if(checkbox){top=translateY+checkbox.y+(scrollOffset||0)+4,H.css(checkbox,{left:alignAttr.translateX+item.checkboxOffset+checkbox.x-60-bBox.width+"px",top:top+"px",display:top>translateY-6&&top<translateY+clipHeight-6?"":"none"});var $checkbox=angular.element(checkbox);$checkbox.parent().hasClass("checkHandler")||($checkbox.wrap('<span class="checkHandler" />'),$checkbox.parents(".checkHandler").attr("style",$checkbox.attr("style")),$checkbox.after('<span class="checkRadioStyleAux"></span>')),$checkbox.removeAttr("style")}}))})}(Highcharts)}}}])});
//# sourceMappingURL=general-services.js.map
